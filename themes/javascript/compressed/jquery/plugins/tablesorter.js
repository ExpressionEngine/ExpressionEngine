/*!
 *
 * TableSorter 2.0 - Client-side table sorting with ease!
 * Version 2.0.3
 * @requires jQuery v1.2.3
 *
 * Copyright (c) 2007 Christian Bach
 * Examples and docs at: http://tablesorter.com
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 */
!function(t){t.extend({tablesorter:new function(){function e(t,e){r(t+","+((new Date).getTime()-e.getTime())+"ms")}function r(t){"undefined"!=typeof console&&"undefined"!=typeof console.debug?console.log(t):alert(t)}function n(e,i){if(e.config.debug)var n="";var a=e.tBodies[0].rows;if(e.tBodies[0].rows[0])for(var d=[],c=a[0].cells,u=c.length,f=0;u>f;f++){var l=!1;t.metadata&&t(i[f]).metadata()&&t(i[f]).metadata().sorter?l=s(t(i[f]).metadata().sorter):e.config.headers[f]&&e.config.headers[f].sorter&&(l=s(e.config.headers[f].sorter)),l||(l=o(e,c[f])),e.config.debug&&(n+="column:"+f+" parser:"+l.id+"\n"),d.push(l)}return e.config.debug&&r(n),d}function o(e,r){for(var i=F.length,n=1;i>n;n++)if(F[n].is(t.trim(d(e.config,r)),e,r))return F[n];return F[0]}function s(t){for(var e=F.length,r=0;e>r;r++)if(F[r].id.toLowerCase()==t.toLowerCase())return F[r];return!1}function a(r){if(r.config.debug)var i=new Date;for(var n=r.tBodies[0]&&r.tBodies[0].rows.length||0,o=r.tBodies[0].rows[0]&&r.tBodies[0].rows[0].cells.length||0,s=r.config.parsers,a={row:[],normalized:[]},c=0;n>c;++c){var u=r.tBodies[0].rows[c],f=[];a.row.push(t(u));for(var l=0;o>l;++l)f.push(s[l].format(d(r.config,u.cells[l]),r,u.cells[l]));f.push(c),a.normalized.push(f),f=null}return r.config.debug&&e("Building cache for "+n+" rows:",i),a}function d(e,r){if(!r)return"";var i="";return i="simple"==e.textExtraction?r.childNodes[0]&&r.childNodes[0].hasChildNodes()?r.childNodes[0].innerHTML:r.innerHTML:"function"==typeof e.textExtraction?e.textExtraction(r):t(r).text()}function c(r,i){if(r.config.debug)var n=new Date;for(var o=i,s=o.row,a=o.normalized,d=a.length,c=a[0].length-1,u=t(r.tBodies[0]),f=[],l=0;d>l;l++)if(f.push(s[a[l][c]]),!r.config.appender)for(var g=s[a[l][c]],m=g.length,p=0;m>p;p++)u[0].appendChild(g[p]);r.config.appender&&r.config.appender(r,f),f=null,r.config.debug&&e("Rebuilt table:",n),h(r),setTimeout(function(){t(r).trigger("sortEnd")},0)}function u(i){if(i.config.debug)var n=new Date;for(var o=(t.metadata?!0:!1,[]),s=0;s<i.tHead.rows.length;s++)o[s]=0;return $tableHeaders=t("thead th",i),$tableHeaders.each(function(e){this.count=0,this.column=e,this.order=m(i.config.sortInitialOrder),(f(this)||l(i,e))&&(this.sortDisabled=!0),this.sortDisabled||t(this).addClass(i.config.cssHeader),i.config.headerList[e]=this}),i.config.debug&&(e("Built headers:",n),r($tableHeaders)),$tableHeaders}function f(e){return t.metadata&&t(e).metadata().sorter===!1?!0:!1}function l(t,e){return t.config.headers[e]&&t.config.headers[e].sorter===!1?!0:!1}function h(t){for(var e=t.config.widgets,r=e.length,i=0;r>i;i++)g(e[i]).format(t)}function g(t){for(var e=B.length,r=0;e>r;r++)if(B[r].id.toLowerCase()==t.toLowerCase())return B[r]}function m(t){return i="Number"!=typeof t?"desc"==t.toLowerCase()?1:0:1==t?t:0}function p(t,e){for(var r=e.length,i=0;r>i;i++)if(e[i][0]==t)return!0;return!1}function b(e,r,i,n){r.removeClass(n[0]).removeClass(n[1]);var o=[];r.each(function(){this.sortDisabled||(o[this.column]=t(this))});for(var s=i.length,a=0;s>a;a++)o[i[a][0]].addClass(n[i[a][1]])}function v(e){var r=e.config;if(r.widthFixed){var i=t("<colgroup>");t("tr:first td",e.tBodies[0]).each(function(){i.append(t("<col>").css("width",t(this).width()))}),t(e).prepend(i)}}function w(t,e){for(var r=t.config,i=e.length,n=0;i>n;n++){var o=e[n],s=r.headerList[o[0]];s.count=o[1],s.count++}}function y(t,e,r){var i;t.config.debug&&(i=new Date);var n=function(e){for(var i,n,o,s=[],a=[],d=e.length,c=0;d>c;c++)o=e[c][0],n=e[c][1],s[c]=o,a[c]="text"==D(t.config.parsers,o)?0==n?L:x:0==n?$:C;return i=r.normalized[0].length-1,function(t,e){for(var r,n,o=0;d>o;o++)if(r=s[o],n=a[o](t[r],e[r]))return n;return t[i]-e[i]}};return r.normalized.sort(n(e)),t.config.debug,r}function L(t,e){return e>t?-1:t>e?1:0}function x(t,e){return t>e?-1:e>t?1:0}function $(t,e){return t-e}function C(t,e){return e-t}function D(t,e){return t[e].type}var F=[],B=[];this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:!1,cancelSelection:!0,sortList:[],headerList:[],dateFormat:"us",decimal:".",debug:!1},this.benchmark=e,this.construct=function(e){return this.each(function(){if(this.tHead&&this.tBodies){var r,i,o,s;this.config={},s=t.extend(this.config,t.tablesorter.defaults,e),r=t(this),i=u(this),this.config.parsers=n(this,i),o=a(this);var d=[s.cssDesc,s.cssAsc];v(this),i.click(function(e){r.trigger("sortStart");var n=r[0].tBodies[0]&&r[0].tBodies[0].rows.length||0;if(!this.sortDisabled&&n>0){var a=(t(this),this.column);if(this.order=this.count++%2,e[s.sortMultiSortKey])if(p(a,s.sortList))for(var u=0;u<s.sortList.length;u++){var f=s.sortList[u],l=s.headerList[f[0]];f[0]==a&&(l.count=f[1],l.count++,f[1]=l.count%2)}else s.sortList.push([a,this.order]);else{if(s.sortList=[],null!=s.sortForce)for(var h=s.sortForce,u=0;u<h.length;u++)h[u][0]!=a&&s.sortList.push(h[u]);s.sortList.push([a,this.order])}return setTimeout(function(){b(r[0],i,s.sortList,d),c(r[0],y(r[0],s.sortList,o))},1),!1}}).mousedown(function(){return s.cancelSelection?(this.onselectstart=function(){return!1},!1):void 0}),r.bind("update",function(){this.config.parsers=n(this,i),o=a(this)}).bind("sorton",function(e,r){t(this).trigger("sortStart"),s.sortList=r;var n=s.sortList;w(this,n),b(this,i,n,d),c(this,y(this,n,o))}).bind("appendCache",function(){c(this,o)}).bind("applyWidgetId",function(t,e){g(e).format(this)}).bind("applyWidgets",function(){h(this)}),t.metadata&&t(this).metadata()&&t(this).metadata().sortlist&&(s.sortList=t(this).metadata().sortlist),s.sortList.length>0&&r.trigger("sorton",[s.sortList]),h(this)}})},this.addParser=function(t){for(var e=F.length,r=!0,i=0;e>i;i++)F[i].id.toLowerCase()==t.id.toLowerCase()&&(r=!1);r&&F.push(t)},this.addWidget=function(t){B.push(t)},this.formatFloat=function(t){var e=parseFloat(t);return isNaN(e)?0:e},this.formatInt=function(t){var e=parseInt(t);return isNaN(e)?0:e},this.isDigit=function(e,r){var i="\\"+r.decimal,n="/(^[+]?0("+i+"0+)?$)|(^([-+]?[1-9][0-9]*)$)|(^([-+]?((0?|[1-9][0-9]*)"+i+"(0*[1-9][0-9]*)))$)|(^[-+]?[1-9]+[0-9]*"+i+"0+$)/";return RegExp(n).test(t.trim(e))},this.clearTableBody=function(e){function r(){for(;this.firstChild;)this.removeChild(this.firstChild)}t.browser.msie?r.apply(e.tBodies[0]):e.tBodies[0].innerHTML=""}}}),t.fn.extend({tablesorter:t.tablesorter.construct});var e=t.tablesorter;e.addParser({id:"text",is:function(){return!0},format:function(e){return t.trim(e.toLowerCase())},type:"text"}),e.addParser({id:"digit",is:function(e,r){var i=r.config;return t.tablesorter.isDigit(e,i)},format:function(e){return t.tablesorter.formatFloat(e)},type:"numeric"}),e.addParser({id:"currency",is:function(t){return/^[\xa3$\u20ac?.]/.test(t)},format:function(e){return t.tablesorter.formatFloat(e.replace(new RegExp(/[^0-9.]/g),""))},type:"numeric"}),e.addParser({id:"ipAddress",is:function(t){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(t)},format:function(e){for(var r=e.split("."),i="",n=r.length,o=0;n>o;o++){var s=r[o];i+=2==s.length?"0"+s:s}return t.tablesorter.formatFloat(i)},type:"numeric"}),e.addParser({id:"url",is:function(t){return/^(https?|ftp|file):\/\/$/.test(t)},format:function(t){return jQuery.trim(t.replace(new RegExp(/(https?|ftp|file):\/\//),""))},type:"text"}),e.addParser({id:"isoDate",is:function(t){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(t)},format:function(e){return t.tablesorter.formatFloat(""!=e?new Date(e.replace(new RegExp(/-/g),"/")).getTime():"0")},type:"numeric"}),e.addParser({id:"percent",is:function(e){return/\%$/.test(t.trim(e))},format:function(e){return t.tablesorter.formatFloat(e.replace(new RegExp(/%/g),""))},type:"numeric"}),e.addParser({id:"usLongDate",is:function(t){return t.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/))},format:function(e){return t.tablesorter.formatFloat(new Date(e).getTime())},type:"numeric"}),e.addParser({id:"shortDate",is:function(t){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(t)},format:function(e,r){var i=r.config;return e=e.replace(/\-/g,"/"),"us"==i.dateFormat?e=e.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2"):"uk"==i.dateFormat?e=e.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1"):("dd/mm/yy"==i.dateFormat||"dd-mm-yy"==i.dateFormat)&&(e=e.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3")),t.tablesorter.formatFloat(new Date(e).getTime())},type:"numeric"}),e.addParser({id:"time",is:function(t){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(t)},format:function(e){return t.tablesorter.formatFloat(new Date("2000/01/01 "+e).getTime())},type:"numeric"}),e.addParser({id:"metadata",is:function(){return!1},format:function(e,r,i){var n=r.config,o=n.parserMetadataName?n.parserMetadataName:"sortValue";return t(i).metadata()[o]},type:"numeric"}),e.addWidget({id:"zebra",format:function(e){if(e.config.debug)var r=new Date;t("tr:visible",e.tBodies[0]).filter(":even").removeClass(e.config.widgetZebra.css[1]).addClass(e.config.widgetZebra.css[0]).end().filter(":odd").removeClass(e.config.widgetZebra.css[0]).addClass(e.config.widgetZebra.css[1]),e.config.debug&&t.tablesorter.benchmark("Applying Zebra widget",r)}})}(jQuery);