RedactorX.add("plugin","beyondgrammar",{subscribe:{"editor.docmousedown":function(t){t=t.get("e");t&&this._isPwa(t)&&t.preventDefault()},"editor.before.blur":function(t){var e,r=t.get("e");r&&this._isPwa(r)&&(e=this.app.offset.get(),setTimeout(function(){this.app.offset.set(e)}.bind(this),10),t.stop())},"editor.unparse":function(t){var e=t.get("html"),e=this.app.utils.wrap(e,function(t){t.find(".pwa-mark").unwrap()});t.set("html",e)}},start:function(){this.GrammarChecker=this._getGrammarChecker(),this.opts.beyondgrammar&&this.GrammarChecker&&this._activate()},_isPwa:function(t){return this.dom(t.target).hasClass("pwa-suggest")},_activate:function(){this.$editor=this.app.editor.getEditor(),this.$editor.attr("spellcheck",!1);var t=new this.GrammarChecker(this.$editor.get(),this.opts.beyondgrammar.service,this.opts.beyondgrammar.grammar);t.init().then(function(){t.activate()})},_getGrammarChecker:function(){return void 0!==window.BeyondGrammar&&window.BeyondGrammar.GrammarChecker}});