RedactorX.add("plugin","textexpander",{defaults:{items:!1},start:function(){this.opts.textexpander.items&&(this.$editor=this.app.editor.getEditor(),this.$editor.on("keyup."+this.prefix+"-plugin-textexpander",this._expand.bind(this)))},stop:function(){this.$editor.off("."+this.prefix+"-plugin-textexpander")},_expand:function(e){var t=e.which;if(t===this.app.keycodes.SPACE){var i=this.opts.textexpander.items;for(t in i){var p=i[t],r=new RegExp(this.app.utils.escapeRegExp(t)+"\\s$"),n=t.length+1;if(t===this.app.selection.getText("before",n).trim())return this._replaceSelection(r,p)}}},_replaceSelection:function(e,t){this.app.marker.insert();var i=this.app.marker.find("start").previousSibling,p=i.textContent;p=(p=p.replace(/&nbsp;/," ")).replace(e,t),i.textContent=p,this.app.marker.remove()}});