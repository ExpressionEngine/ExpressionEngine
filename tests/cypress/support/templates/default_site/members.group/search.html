{layout="members/_layout"}

<h1>Member Listing</h1>

<div class="result">
    <table class='tableborder' border='0' cellspacing='0' cellpadding='3' style='width:100%'>
    <tr>
        <td class='memberlistHead'>Member Search</td>
    </tr>
    <tr>
        <td class='tableCellOne'>
            {exp:member:member_search
                memberlist_url="members/memberlist"
                }

                {form_declaration}

                <div id="member_search_fields">
                    <div id="search_field_1" class="itempadbig">
                        <input type="text" name="search_keywords_1" />
                        <select name='search_field_1' class='select' >
                            <option value='screen_name'>Search Field</option>
                            <option value='screen_name'>Screen Name</option>
                            <option value='email'>Email Address</option>
                            {custom_profile_field_options}
                        </select>
                        <a href="#" onclick="add_search_field(); return false;" class="defaultBold">+</a>
                        <a href="#" onclick="delete_search_field(this); return false;" class="defaultBold">-</a>
                    </div>
                </div>

                <select name='search_group_id' class='select' >
                    {group_id_options}
                </select>

                <div class="itempadbig">&nbsp; <input type='submit' value='search' class='submit' /></div>
            </form>
            {/exp:member:member_search}
        </td>
    </tr>
    </table>
</div>

<script type="text/javascript">
<!--

var searchFieldCount = 1;

function add_search_field()
{
    if (document.getElementById('search_field_1'))
    {
        // Find last search field
        var originalSearchField = document.getElementById('search_field_1');
        searchFieldCount++;

        // Clone it, change the id
        var newSearchField = originalSearchField.cloneNode(true);
        newSearchField.id = 'search_field_' + searchFieldCount;

        // Zero the input and change the names of fields
        var newFieldInputs = newSearchField.getElementsByTagName('input');
        newFieldInputs[0].value = '';
        newFieldInputs[0].name = 'search_keywords_' + searchFieldCount;

        var newFieldSelects = newSearchField.getElementsByTagName('select');
        newFieldSelects[0].name = 'search_field_' + searchFieldCount;

        // Append it and we're done
        originalSearchField.parentNode.appendChild(newSearchField);
    }
}

function delete_search_field(obj)
{
    if (obj.parentNode && obj.parentNode.id != 'search_field_1')
    {
        obj.parentNode.parentNode.removeChild(obj.parentNode)
    }
}

//-->
</script>